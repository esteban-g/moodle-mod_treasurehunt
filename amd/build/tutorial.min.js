function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}f(void 0)})}}define ("mod_treasurehunt/tutorial",["jquery","mod_treasurehunt/intro","core/str","core/notification"],function(a,b,c,d){return{launchedittutorial:function launchedittutorial(){var e=b(),f=["nextstep","prevstep","skiptutorial","donetutorial","welcome_edit_tour","map_tour","mapplay_tour","roads_tour","stages_tour","addroad_tour","addstage_tour","save_tour","editend_tour"],g=f.map(function(a){return{key:a,component:"treasurehunt"}});a(".treasurehunt-editor-loader").show();c.get_strings(g).done(function(b){a(".treasurehunt-editor-loader").hide();configureEditIntro(e,b,f);e.start()}).fail(d.exception)},editpage:function editpage(){a("#edition_maintitle > h2 > a").on("click",this.launchedittutorial);var b=localStorage.getItem("introEditProgress");if("Done"!=b){this.launchedittutorial()}},launchplaytutorial:function launchplaytutorial(){var e=b(),f=["nextstep","prevstep","skiptutorial","donetutorial","welcome_play_tour","lastsuccessfulstage_tour","mapplay_tour","validatelocation_tour","autolocate_tour","playend_tour"],g=f.map(function(a){return{key:a,component:"treasurehunt"}});c.get_strings(g).done(function(b){_asyncToGenerator(regeneratorRuntime.mark(function a(){var c;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:c=0;case 1:if(!(c<b.length)){a.next=8;break}a.next=4;return b[c];case 4:b[c]=a.sent;case 5:c++;a.next=1;break;case 8:case"end":return a.stop();}}},a)}))().then(function(){a("#infopanel").addClass("active");a(".sidebar-mask").addClass("active dismissible");configurePlayIntro(e,b,f);e.start()})}).fail(d.exception)},playpage:function playpage(){a("#playerhelp").on("click",this.launchplaytutorial);var b=localStorage.getItem("introPlayProgress");if("Done"!=b){this.launchplaytutorial()}}}});function configureEditIntro(a,b,c){a.setOptions({nextLabel:b[c.indexOf("nextstep")],prevLabel:b[c.indexOf("prevstep")],skipLabel:b[c.indexOf("skiptutorial")],doneLabel:b[c.indexOf("donetutorial")],steps:[{element:"#treasurehunt-editor",intro:b[c.indexOf("welcome_edit_tour")],position:"floating"},{element:"#mapedit",intro:b[c.indexOf("map_tour")],position:"floating"},{element:"#roadlist",intro:b[c.indexOf("roads_tour")],position:"top"},{element:"#stagelistpanel",intro:b[c.indexOf("stages_tour")],position:"right"},{element:"#addroad",intro:b[c.indexOf("addroad_tour")],position:"bottom"},{element:"#addstage",intro:b[c.indexOf("addstage_tour")],position:"bottom"},{element:"#savestage",intro:b[c.indexOf("save_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:b[c.indexOf("editend_tour")],position:"floating"}]});a.onexit(function(){localStorage.setItem("introEditProgress","Done")});a.oncomplete(function(){localStorage.setItem("introEditProgress","Done")});a.onchange(function(){localStorage.setItem("introEditProgress","Done")})}function configurePlayIntro(a,b,c){a.setOptions({nextLabel:b[c.indexOf("nextstep")],prevLabel:b[c.indexOf("prevstep")],skipLabel:b[c.indexOf("skiptutorial")],doneLabel:b[c.indexOf("donetutorial")],steps:[{intro:b[c.indexOf("welcome_play_tour")],position:"floating"},{element:"#collapsibleset",intro:b[c.indexOf("lastsuccessfulstage_tour")],position:"top"},{element:"#mapplay",intro:b[c.indexOf("mapplay_tour")],position:"floating"},{element:"#validatelocation",intro:b[c.indexOf("validatelocation_tour")],position:"top"},{element:"#autolocate",intro:b[c.indexOf("autolocate_tour")],position:"top"},{element:"#treasurehunt-editor",intro:b[c.indexOf("playend_tour")],position:"floating"}]});a.onexit(function(){localStorage.setItem("introPlayProgress","Done")});a.oncomplete(function(){localStorage.setItem("introPlayProgress","Done")});a.onchange(function(){localStorage.setItem("introPlayProgress","Done")});a.onafterchange(function(a){var b=a.parentElement;while(null!==b){if("panel"==b.dataset.role){b.style="z-index: 1001 !important";break}else{b=b.parentElement}}})}
//# sourceMappingURL=tutorial.min.js.map
